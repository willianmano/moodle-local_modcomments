define("local_modcomments/addcomment",["jquery","core/ajax","local_modcomments/sweetalert"],(function($,Ajax,Swal){var AddComment=function(courseid,cmid,modname){this.courseid=courseid,this.cmid=cmid,this.modname=modname,this.registerEventListeners()};return AddComment.prototype.courseid=-1,AddComment.prototype.cmid=-1,AddComment.prototype.modname="",AddComment.prototype.registerEventListeners=function(){$(".comment-form").submit(function(event){event.preventDefault(),this.saveComment($(".comment-form .comment-input").val())}.bind(this))},AddComment.prototype.saveComment=function(comment){""!==comment&&Ajax.call([{methodname:"local_modcomments_addcomment",args:{courseid:this.courseid,cmid:this.cmid,modname:this.modname,comment:comment}}])[0].done(function(data){this.addCommentContainer(data)}.bind(this)).fail(function(error){var message=error.message;message||(message=error.error),this.showToast("error",message)}.bind(this))},AddComment.prototype.showToast=function(type,message){Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:8e3,timerProgressBar:!0,onOpen:toast=>{toast.addEventListener("mouseenter",Swal.stopTimer),toast.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:type,title:message})},AddComment.prototype.addCommentContainer=function(data){var targetdiv=$(".comments-container"),userimg=$(".newcomment .userimg img").clone(),userfullname=userimg.attr("alt"),newcomment=$("<div class='comment fadeIn'><div class='userinfo'><div class='userimg'>"+$("<div/>").append(userimg).html()+"</div><div class='nameanddate'><p class='username'>"+userfullname+"</p><span class='small'>"+data.humantimecreated+"</span></div></div><p class='text'>"+data.comment+"</p></div>");targetdiv.prepend(newcomment),$(".comment-form .comment-input").val("")},{init:function(courseid,cmid,modname){return new AddComment(courseid,cmid,modname)}}}));

//# sourceMappingURL=addcomment.min.js.map