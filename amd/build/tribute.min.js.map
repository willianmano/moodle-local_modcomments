{"version":3,"file":"tribute.min.js","sources":["../src/tribute.js"],"sourcesContent":["/* !\n* tribute https://github.com/zurb/tribute\n* A cross-browser @mention engine written in ES6, no dependencies.\n* @version 5.1.3\n* @copyright 2017-2020 ZURB, Inc. 2014 Jeff Collins, 2012 Matt York\n* @license: MIT\n*/\n\n/* eslint-disable */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n        typeof define === 'function' && define.amd ? define(factory) :\n            (global = global || self, global.Tribute = factory());\n}(this, (function () { 'use strict';\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    function _defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }\n\n    function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) _defineProperties(Constructor, staticProps);\n        return Constructor;\n    }\n\n    function _slicedToArray(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n    }\n\n    function _arrayWithHoles(arr) {\n        if (Array.isArray(arr)) return arr;\n    }\n\n    function _iterableToArrayLimit(arr, i) {\n        if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n        var _arr = [];\n        var _n = true;\n        var _d = false;\n        var _e = undefined;\n\n        try {\n            for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n                _arr.push(_s.value);\n\n                if (i && _arr.length === i) break;\n            }\n        } catch (err) {\n            _d = true;\n            _e = err;\n        } finally {\n            try {\n                if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n            } finally {\n                if (_d) throw _e;\n            }\n        }\n\n        return _arr;\n    }\n\n    function _unsupportedIterableToArray(o, minLen) {\n        if (!o) return;\n        if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n        var n = Object.prototype.toString.call(o).slice(8, -1);\n        if (n === \"Object\" && o.constructor) n = o.constructor.name;\n        if (n === \"Map\" || n === \"Set\") return Array.from(n);\n        if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n    }\n\n    function _arrayLikeToArray(arr, len) {\n        if (len == null || len > arr.length) len = arr.length;\n\n        for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n        return arr2;\n    }\n\n    function _nonIterableRest() {\n        throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n\n    if (!Array.prototype.find) {\n        Array.prototype.find = function (predicate) {\n            if (this === null) {\n                throw new TypeError('Array.prototype.find called on null or undefined');\n            }\n\n            if (typeof predicate !== 'function') {\n                throw new TypeError('predicate must be a function');\n            }\n\n            var list = Object(this);\n            var length = list.length >>> 0;\n            var thisArg = arguments[1];\n            var value;\n\n            for (var i = 0; i < length; i++) {\n                value = list[i];\n\n                if (predicate.call(thisArg, value, i, list)) {\n                    return value;\n                }\n            }\n\n            return undefined;\n        };\n    }\n\n    if (window && typeof window.CustomEvent !== \"function\") {\n        var CustomEvent$1 = function CustomEvent(event, params) {\n            params = params || {\n                bubbles: false,\n                cancelable: false,\n                detail: undefined\n            };\n            var evt = document.createEvent('CustomEvent');\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n            return evt;\n        };\n\n        if (typeof window.Event !== 'undefined') {\n            CustomEvent$1.prototype = window.Event.prototype;\n        }\n\n        window.CustomEvent = CustomEvent$1;\n    }\n\n    var TributeEvents = /*#__PURE__*/function () {\n        function TributeEvents(tribute) {\n            _classCallCheck(this, TributeEvents);\n\n            this.tribute = tribute;\n            this.tribute.events = this;\n        }\n\n        _createClass(TributeEvents, [{\n            key: \"bind\",\n            value: function bind(element) {\n                element.boundKeydown = this.keydown.bind(element, this);\n                element.boundKeyup = this.keyup.bind(element, this);\n                element.boundInput = this.input.bind(element, this);\n                element.addEventListener(\"keydown\", element.boundKeydown, false);\n                element.addEventListener(\"keyup\", element.boundKeyup, false);\n                element.addEventListener(\"input\", element.boundInput, false);\n            }\n        }, {\n            key: \"unbind\",\n            value: function unbind(element) {\n                element.removeEventListener(\"keydown\", element.boundKeydown, false);\n                element.removeEventListener(\"keyup\", element.boundKeyup, false);\n                element.removeEventListener(\"input\", element.boundInput, false);\n                delete element.boundKeydown;\n                delete element.boundKeyup;\n                delete element.boundInput;\n            }\n        }, {\n            key: \"keydown\",\n            value: function keydown(instance, event) {\n                if (instance.shouldDeactivate(event)) {\n                    instance.tribute.isActive = false;\n                    instance.tribute.hideMenu();\n                }\n\n                var element = this;\n                instance.commandEvent = false;\n                TributeEvents.keys().forEach(function (o) {\n                    if (o.key === event.keyCode) {\n                        instance.commandEvent = true;\n                        instance.callbacks()[o.value.toLowerCase()](event, element);\n                    }\n                });\n            }\n        }, {\n            key: \"input\",\n            value: function input(instance, event) {\n                instance.inputEvent = true;\n                instance.keyup.call(this, instance, event);\n            }\n        }, {\n            key: \"click\",\n            value: function click(instance, event) {\n                var tribute = instance.tribute;\n\n                if (tribute.menu && tribute.menu.contains(event.target)) {\n                    var li = event.target;\n                    event.preventDefault();\n                    event.stopPropagation();\n\n                    while (li.nodeName.toLowerCase() !== \"li\") {\n                        li = li.parentNode;\n\n                        if (!li || li === tribute.menu) {\n                            throw new Error(\"cannot find the <li> container for the click\");\n                        }\n                    }\n\n                    tribute.selectItemAtIndex(li.getAttribute(\"data-index\"), event);\n                    tribute.hideMenu(); // TODO: should fire with externalTrigger and target is outside of menu\n                } else if (tribute.current.element && !tribute.current.externalTrigger) {\n                    tribute.current.externalTrigger = false;\n                    setTimeout(function () {\n                        return tribute.hideMenu();\n                    });\n                }\n            }\n        }, {\n            key: \"keyup\",\n            value: function keyup(instance, event) {\n                if (instance.inputEvent) {\n                    instance.inputEvent = false;\n                }\n\n                instance.updateSelection(this);\n                if (event.keyCode === 27) return;\n\n                if (!instance.tribute.allowSpaces && instance.tribute.hasTrailingSpace) {\n                    instance.tribute.hasTrailingSpace = false;\n                    instance.commandEvent = true;\n                    instance.callbacks()[\"space\"](event, this);\n                    return;\n                }\n\n                if (!instance.tribute.isActive) {\n                    if (instance.tribute.autocompleteMode) {\n                        instance.callbacks().triggerChar(event, this, \"\");\n                    } else {\n                        var keyCode = instance.getKeyCode(instance, this, event);\n                        if (isNaN(keyCode) || !keyCode) return;\n                        var trigger = instance.tribute.triggers().find(function (trigger) {\n                            return trigger.charCodeAt(0) === keyCode;\n                        });\n\n                        if (typeof trigger !== \"undefined\") {\n                            instance.callbacks().triggerChar(event, this, trigger);\n                        }\n                    }\n                }\n\n                if (instance.tribute.current.mentionText.length < instance.tribute.current.collection.menuShowMinLength) {\n                    return;\n                }\n\n                if ((instance.tribute.current.trigger || instance.tribute.autocompleteMode) && instance.commandEvent === false || instance.tribute.isActive && event.keyCode === 8) {\n                    instance.tribute.showMenuFor(this, true);\n                }\n            }\n        }, {\n            key: \"shouldDeactivate\",\n            value: function shouldDeactivate(event) {\n                if (!this.tribute.isActive) return false;\n\n                if (this.tribute.current.mentionText.length === 0) {\n                    var eventKeyPressed = false;\n                    TributeEvents.keys().forEach(function (o) {\n                        if (event.keyCode === o.key) eventKeyPressed = true;\n                    });\n                    return !eventKeyPressed;\n                }\n\n                return false;\n            }\n        }, {\n            key: \"getKeyCode\",\n            value: function getKeyCode(instance, el, event) {\n\n                var tribute = instance.tribute;\n                var info = tribute.range.getTriggerInfo(false, tribute.hasTrailingSpace, true, tribute.allowSpaces, tribute.autocompleteMode);\n\n                if (info) {\n                    return info.mentionTriggerChar.charCodeAt(0);\n                } else {\n                    return false;\n                }\n            }\n        }, {\n            key: \"updateSelection\",\n            value: function updateSelection(el) {\n                this.tribute.current.element = el;\n                var info = this.tribute.range.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n                if (info) {\n                    this.tribute.current.selectedPath = info.mentionSelectedPath;\n                    this.tribute.current.mentionText = info.mentionText;\n                    this.tribute.current.selectedOffset = info.mentionSelectedOffset;\n                }\n            }\n        }, {\n            key: \"callbacks\",\n            value: function callbacks() {\n                var _this = this;\n\n                return {\n                    triggerChar: function triggerChar(e, el, trigger) {\n                        var tribute = _this.tribute;\n                        tribute.current.trigger = trigger;\n                        var collectionItem = tribute.collection.find(function (item) {\n                            return item.trigger === trigger;\n                        });\n                        tribute.current.collection = collectionItem;\n\n                        if (tribute.current.mentionText.length >= tribute.current.collection.menuShowMinLength && tribute.inputEvent) {\n                            tribute.showMenuFor(el, true);\n                        }\n                    },\n                    enter: function enter(e, el) {\n                        // choose selection\n                        if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            setTimeout(function () {\n                                _this.tribute.selectItemAtIndex(_this.tribute.menuSelected, e);\n\n                                _this.tribute.hideMenu();\n                            }, 0);\n                        }\n                    },\n                    escape: function escape(e, el) {\n                        if (_this.tribute.isActive) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            _this.tribute.isActive = false;\n\n                            _this.tribute.hideMenu();\n                        }\n                    },\n                    tab: function tab(e, el) {\n                        // choose first match\n                        _this.callbacks().enter(e, el);\n                    },\n                    space: function space(e, el) {\n                        if (_this.tribute.isActive) {\n                            if (_this.tribute.spaceSelectsMatch) {\n                                _this.callbacks().enter(e, el);\n                            } else if (!_this.tribute.allowSpaces) {\n                                e.stopPropagation();\n                                setTimeout(function () {\n                                    _this.tribute.hideMenu();\n\n                                    _this.tribute.isActive = false;\n                                }, 0);\n                            }\n                        }\n                    },\n                    up: function up(e, el) {\n                        // navigate up ul\n                        if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            var count = _this.tribute.current.filteredItems.length,\n                                selected = _this.tribute.menuSelected;\n\n                            if (count > selected && selected > 0) {\n                                _this.tribute.menuSelected--;\n\n                                _this.setActiveLi();\n                            } else if (selected === 0) {\n                                _this.tribute.menuSelected = count - 1;\n\n                                _this.setActiveLi();\n\n                                _this.tribute.menu.scrollTop = _this.tribute.menu.scrollHeight;\n                            }\n                        }\n                    },\n                    down: function down(e, el) {\n                        // navigate down ul\n                        if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            var count = _this.tribute.current.filteredItems.length - 1,\n                                selected = _this.tribute.menuSelected;\n\n                            if (count > selected) {\n                                _this.tribute.menuSelected++;\n\n                                _this.setActiveLi();\n                            } else if (count === selected) {\n                                _this.tribute.menuSelected = 0;\n\n                                _this.setActiveLi();\n\n                                _this.tribute.menu.scrollTop = 0;\n                            }\n                        }\n                    },\n                    \"delete\": function _delete(e, el) {\n                        if (_this.tribute.isActive && _this.tribute.current.mentionText.length < 1) {\n                            _this.tribute.hideMenu();\n                        } else if (_this.tribute.isActive) {\n                            _this.tribute.showMenuFor(el);\n                        }\n                    }\n                };\n            }\n        }, {\n            key: \"setActiveLi\",\n            value: function setActiveLi(index) {\n                var lis = this.tribute.menu.querySelectorAll(\"li\"),\n                    length = lis.length >>> 0;\n                if (index) this.tribute.menuSelected = parseInt(index);\n\n                for (var i = 0; i < length; i++) {\n                    var li = lis[i];\n\n                    if (i === this.tribute.menuSelected) {\n                        li.classList.add(this.tribute.current.collection.selectClass);\n                        var liClientRect = li.getBoundingClientRect();\n                        var menuClientRect = this.tribute.menu.getBoundingClientRect();\n\n                        if (liClientRect.bottom > menuClientRect.bottom) {\n                            var scrollDistance = liClientRect.bottom - menuClientRect.bottom;\n                            this.tribute.menu.scrollTop += scrollDistance;\n                        } else if (liClientRect.top < menuClientRect.top) {\n                            var _scrollDistance = menuClientRect.top - liClientRect.top;\n\n                            this.tribute.menu.scrollTop -= _scrollDistance;\n                        }\n                    } else {\n                        li.classList.remove(this.tribute.current.collection.selectClass);\n                    }\n                }\n            }\n        }, {\n            key: \"getFullHeight\",\n            value: function getFullHeight(elem, includeMargin) {\n                var height = elem.getBoundingClientRect().height;\n\n                if (includeMargin) {\n                    var style = elem.currentStyle || window.getComputedStyle(elem);\n                    return height + parseFloat(style.marginTop) + parseFloat(style.marginBottom);\n                }\n\n                return height;\n            }\n        }], [{\n            key: \"keys\",\n            value: function keys() {\n                return [{\n                    key: 9,\n                    value: \"TAB\"\n                }, {\n                    key: 8,\n                    value: \"DELETE\"\n                }, {\n                    key: 13,\n                    value: \"ENTER\"\n                }, {\n                    key: 27,\n                    value: \"ESCAPE\"\n                }, {\n                    key: 32,\n                    value: \"SPACE\"\n                }, {\n                    key: 38,\n                    value: \"UP\"\n                }, {\n                    key: 40,\n                    value: \"DOWN\"\n                }];\n            }\n        }]);\n\n        return TributeEvents;\n    }();\n\n    var TributeMenuEvents = /*#__PURE__*/function () {\n        function TributeMenuEvents(tribute) {\n            _classCallCheck(this, TributeMenuEvents);\n\n            this.tribute = tribute;\n            this.tribute.menuEvents = this;\n            this.menu = this.tribute.menu;\n        }\n\n        _createClass(TributeMenuEvents, [{\n            key: \"bind\",\n            value: function bind(menu) {\n                var _this = this;\n\n                this.menuClickEvent = this.tribute.events.click.bind(null, this);\n                this.menuContainerScrollEvent = this.debounce(function () {\n                    if (_this.tribute.isActive) {\n                        _this.tribute.showMenuFor(_this.tribute.current.element, false);\n                    }\n                }, 300, false);\n                this.windowResizeEvent = this.debounce(function () {\n                    if (_this.tribute.isActive) {\n                        _this.tribute.range.positionMenuAtCaret(true);\n                    }\n                }, 300, false); // fixes IE11 issues with mousedown\n\n                this.tribute.range.getDocument().addEventListener(\"MSPointerDown\", this.menuClickEvent, false);\n                this.tribute.range.getDocument().addEventListener(\"mousedown\", this.menuClickEvent, false);\n                window.addEventListener(\"resize\", this.windowResizeEvent);\n\n                if (this.menuContainer) {\n                    this.menuContainer.addEventListener(\"scroll\", this.menuContainerScrollEvent, false);\n                } else {\n                    window.addEventListener(\"scroll\", this.menuContainerScrollEvent);\n                }\n            }\n        }, {\n            key: \"unbind\",\n            value: function unbind(menu) {\n                this.tribute.range.getDocument().removeEventListener(\"mousedown\", this.menuClickEvent, false);\n                this.tribute.range.getDocument().removeEventListener(\"MSPointerDown\", this.menuClickEvent, false);\n                window.removeEventListener(\"resize\", this.windowResizeEvent);\n\n                if (this.menuContainer) {\n                    this.menuContainer.removeEventListener(\"scroll\", this.menuContainerScrollEvent, false);\n                } else {\n                    window.removeEventListener(\"scroll\", this.menuContainerScrollEvent);\n                }\n            }\n        }, {\n            key: \"debounce\",\n            value: function debounce(func, wait, immediate) {\n                var _arguments = arguments,\n                    _this2 = this;\n\n                var timeout;\n                return function () {\n                    var context = _this2,\n                        args = _arguments;\n\n                    var later = function later() {\n                        timeout = null;\n                        if (!immediate) func.apply(context, args);\n                    };\n\n                    var callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) func.apply(context, args);\n                };\n            }\n        }]);\n\n        return TributeMenuEvents;\n    }();\n\n    var TributeRange = /*#__PURE__*/function () {\n        function TributeRange(tribute) {\n            _classCallCheck(this, TributeRange);\n\n            this.tribute = tribute;\n            this.tribute.range = this;\n        }\n\n        _createClass(TributeRange, [{\n            key: \"getDocument\",\n            value: function getDocument() {\n                var iframe;\n\n                if (this.tribute.current.collection) {\n                    iframe = this.tribute.current.collection.iframe;\n                }\n\n                if (!iframe) {\n                    return document;\n                }\n\n                return iframe.contentWindow.document;\n            }\n        }, {\n            key: \"positionMenuAtCaret\",\n            value: function positionMenuAtCaret(scrollTo) {\n                var _this = this;\n\n                var context = this.tribute.current,\n                    coordinates;\n                var info = this.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n                if (typeof info !== 'undefined') {\n                    if (!this.tribute.positionMenu) {\n                        this.tribute.menu.style.cssText = \"display: block;\";\n                        return;\n                    }\n\n                    if (!this.isContentEditable(context.element)) {\n                        coordinates = this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element, info.mentionPosition);\n                    } else {\n                        coordinates = this.getContentEditableCaretPosition(info.mentionPosition);\n                    }\n\n                    this.tribute.menu.style.cssText = \"top: \".concat(coordinates.top, \"px;\\n                                     left: \").concat(coordinates.left, \"px;\\n                                     right: \").concat(coordinates.right, \"px;\\n                                     bottom: \").concat(coordinates.bottom, \"px;\\n                                     position: absolute;\\n                                     display: block;\");\n\n                    if (coordinates.left === 'auto') {\n                        this.tribute.menu.style.left = 'auto';\n                    }\n\n                    if (coordinates.top === 'auto') {\n                        this.tribute.menu.style.top = 'auto';\n                    }\n\n                    if (scrollTo) this.scrollIntoView();\n                    window.setTimeout(function () {\n                        var menuDimensions = {\n                            width: _this.tribute.menu.offsetWidth,\n                            height: _this.tribute.menu.offsetHeight\n                        };\n\n                        var menuIsOffScreen = _this.isMenuOffScreen(coordinates, menuDimensions);\n\n                        var menuIsOffScreenHorizontally = window.innerWidth > menuDimensions.width && (menuIsOffScreen.left || menuIsOffScreen.right);\n                        var menuIsOffScreenVertically = window.innerHeight > menuDimensions.height && (menuIsOffScreen.top || menuIsOffScreen.bottom);\n\n                        if (menuIsOffScreenHorizontally || menuIsOffScreenVertically) {\n                            _this.tribute.menu.style.cssText = 'display: none';\n\n                            _this.positionMenuAtCaret(scrollTo);\n                        }\n                    }, 0);\n                } else {\n                    this.tribute.menu.style.cssText = 'display: none';\n                }\n            }\n        }, {\n            key: \"selectElement\",\n            value: function selectElement(targetElement, path, offset) {\n                var range;\n                var elem = targetElement;\n\n                if (path) {\n                    for (var i = 0; i < path.length; i++) {\n                        elem = elem.childNodes[path[i]];\n\n                        if (elem === undefined) {\n                            return;\n                        }\n\n                        while (elem.length < offset) {\n                            offset -= elem.length;\n                            elem = elem.nextSibling;\n                        }\n\n                        if (elem.childNodes.length === 0 && !elem.length) {\n                            elem = elem.previousSibling;\n                        }\n                    }\n                }\n\n                var sel = this.getWindowSelection();\n                range = this.getDocument().createRange();\n                range.setStart(elem, offset);\n                range.setEnd(elem, offset);\n                range.collapse(true);\n\n                try {\n                    sel.removeAllRanges();\n                } catch (error) {}\n\n                sel.addRange(range);\n                targetElement.focus();\n            }\n        }, {\n            key: \"replaceTriggerText\",\n            value: function replaceTriggerText(text, requireLeadingSpace, hasTrailingSpace, originalEvent, item) {\n                var info = this.getTriggerInfo(true, hasTrailingSpace, requireLeadingSpace, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n                if (info !== undefined) {\n                    var context = this.tribute.current;\n                    var replaceEvent = new CustomEvent('tribute-replaced', {\n                        detail: {\n                            item: item,\n                            instance: context,\n                            context: info,\n                            event: originalEvent\n                        }\n                    });\n\n                    if (!this.isContentEditable(context.element)) {\n                        var myField = this.tribute.current.element;\n                        var textSuffix = typeof this.tribute.replaceTextSuffix == 'string' ? this.tribute.replaceTextSuffix : ' ';\n                        text += textSuffix;\n                        var startPos = info.mentionPosition;\n                        var endPos = info.mentionPosition + info.mentionText.length + textSuffix.length;\n\n                        if (!this.tribute.autocompleteMode) {\n                            endPos += info.mentionTriggerChar.length - 1;\n                        }\n\n                        myField.value = myField.value.substring(0, startPos) + text + myField.value.substring(endPos, myField.value.length);\n                        myField.selectionStart = startPos + text.length;\n                        myField.selectionEnd = startPos + text.length;\n                    } else {\n                        // add a space to the end of the pasted text\n                        var _textSuffix = typeof this.tribute.replaceTextSuffix == 'string' ? this.tribute.replaceTextSuffix : '\\xA0';\n\n                        text += _textSuffix;\n\n                        var _endPos = info.mentionPosition + info.mentionText.length;\n\n                        if (!this.tribute.autocompleteMode) {\n                            _endPos += info.mentionTriggerChar.length;\n                        }\n\n                        this.pasteHtml(text, info.mentionPosition, _endPos);\n                    }\n\n                    context.element.dispatchEvent(new CustomEvent('input', {\n                        bubbles: true\n                    }));\n                    context.element.dispatchEvent(replaceEvent);\n                }\n            }\n        }, {\n            key: \"pasteHtml\",\n            value: function pasteHtml(html, startPos, endPos) {\n                var range, sel;\n                sel = this.getWindowSelection();\n                range = this.getDocument().createRange();\n                range.setStart(sel.anchorNode, startPos);\n                range.setEnd(sel.anchorNode, endPos);\n                range.deleteContents();\n                var el = this.getDocument().createElement('div');\n                el.innerHTML = html;\n                var frag = this.getDocument().createDocumentFragment(),\n                    node,\n                    lastNode;\n\n                while (node = el.firstChild) {\n                    lastNode = frag.appendChild(node);\n                }\n\n                range.insertNode(frag); // Preserve the selection\n\n                if (lastNode) {\n                    range = range.cloneRange();\n                    range.setStartAfter(lastNode);\n                    range.collapse(true);\n                    sel.removeAllRanges();\n                    sel.addRange(range);\n                }\n            }\n        }, {\n            key: \"getWindowSelection\",\n            value: function getWindowSelection() {\n                if (this.tribute.collection.iframe) {\n                    return this.tribute.collection.iframe.contentWindow.getSelection();\n                }\n\n                return window.getSelection();\n            }\n        }, {\n            key: \"getNodePositionInParent\",\n            value: function getNodePositionInParent(element) {\n                if (element.parentNode === null) {\n                    return 0;\n                }\n\n                for (var i = 0; i < element.parentNode.childNodes.length; i++) {\n                    var node = element.parentNode.childNodes[i];\n\n                    if (node === element) {\n                        return i;\n                    }\n                }\n            }\n        }, {\n            key: \"getContentEditableSelectedPath\",\n            value: function getContentEditableSelectedPath(ctx) {\n                var sel = this.getWindowSelection();\n                var selected = sel.anchorNode;\n                var path = [];\n                var offset;\n\n                if (selected != null) {\n                    var i;\n                    var ce = selected.contentEditable;\n\n                    while (selected !== null && ce !== 'true') {\n                        i = this.getNodePositionInParent(selected);\n                        path.push(i);\n                        selected = selected.parentNode;\n\n                        if (selected !== null) {\n                            ce = selected.contentEditable;\n                        }\n                    }\n\n                    path.reverse(); // getRangeAt may not exist, need alternative\n\n                    offset = sel.getRangeAt(0).startOffset;\n                    return {\n                        selected: selected,\n                        path: path,\n                        offset: offset\n                    };\n                }\n            }\n        }, {\n            key: \"getTextPrecedingCurrentSelection\",\n            value: function getTextPrecedingCurrentSelection() {\n                var context = this.tribute.current,\n                    text = '';\n\n                if (!this.isContentEditable(context.element)) {\n                    var textComponent = this.tribute.current.element;\n\n                    if (textComponent) {\n                        var startPos = textComponent.selectionStart;\n\n                        if (textComponent.value && startPos >= 0) {\n                            text = textComponent.value.substring(0, startPos);\n                        }\n                    }\n                } else {\n                    var selectedElem = this.getWindowSelection().anchorNode;\n\n                    if (selectedElem != null) {\n                        var workingNodeContent = selectedElem.textContent;\n                        var selectStartOffset = this.getWindowSelection().getRangeAt(0).startOffset;\n\n                        if (workingNodeContent && selectStartOffset >= 0) {\n                            text = workingNodeContent.substring(0, selectStartOffset);\n                        }\n                    }\n                }\n\n                return text;\n            }\n        }, {\n            key: \"getLastWordInText\",\n            value: function getLastWordInText(text) {\n                text = text.replace(/\\u00A0/g, ' '); // https://stackoverflow.com/questions/29850407/how-do-i-replace-unicode-character-u00a0-with-a-space-in-javascript\n\n                var wordsArray;\n\n                if (this.tribute.autocompleteSeparator) {\n                    wordsArray = text.split(this.tribute.autocompleteSeparator);\n                } else {\n                    wordsArray = text.split(/\\s+/);\n                }\n\n                var worldsCount = wordsArray.length - 1;\n                return wordsArray[worldsCount].trim();\n            }\n        }, {\n            key: \"getTriggerInfo\",\n            value: function getTriggerInfo(menuAlreadyActive, hasTrailingSpace, requireLeadingSpace, allowSpaces, isAutocomplete) {\n                var _this2 = this;\n\n                var ctx = this.tribute.current;\n                var selected, path, offset;\n\n                if (!this.isContentEditable(ctx.element)) {\n                    selected = this.tribute.current.element;\n                } else {\n                    var selectionInfo = this.getContentEditableSelectedPath(ctx);\n\n                    if (selectionInfo) {\n                        selected = selectionInfo.selected;\n                        path = selectionInfo.path;\n                        offset = selectionInfo.offset;\n                    }\n                }\n\n                var effectiveRange = this.getTextPrecedingCurrentSelection();\n                var lastWordOfEffectiveRange = this.getLastWordInText(effectiveRange);\n\n                if (isAutocomplete) {\n                    return {\n                        mentionPosition: effectiveRange.length - lastWordOfEffectiveRange.length,\n                        mentionText: lastWordOfEffectiveRange,\n                        mentionSelectedElement: selected,\n                        mentionSelectedPath: path,\n                        mentionSelectedOffset: offset\n                    };\n                }\n\n                if (effectiveRange !== undefined && effectiveRange !== null) {\n                    var mostRecentTriggerCharPos = -1;\n                    var triggerChar;\n                    this.tribute.collection.forEach(function (config) {\n                        var c = config.trigger;\n                        var idx = config.requireLeadingSpace ? _this2.lastIndexWithLeadingSpace(effectiveRange, c) : effectiveRange.lastIndexOf(c);\n\n                        if (idx > mostRecentTriggerCharPos) {\n                            mostRecentTriggerCharPos = idx;\n                            triggerChar = c;\n                            requireLeadingSpace = config.requireLeadingSpace;\n                        }\n                    });\n\n                    if (mostRecentTriggerCharPos >= 0 && (mostRecentTriggerCharPos === 0 || !requireLeadingSpace || /[\\xA0\\s]/g.test(effectiveRange.substring(mostRecentTriggerCharPos - 1, mostRecentTriggerCharPos)))) {\n                        var currentTriggerSnippet = effectiveRange.substring(mostRecentTriggerCharPos + triggerChar.length, effectiveRange.length);\n                        triggerChar = effectiveRange.substring(mostRecentTriggerCharPos, mostRecentTriggerCharPos + triggerChar.length);\n                        var firstSnippetChar = currentTriggerSnippet.substring(0, 1);\n                        var leadingSpace = currentTriggerSnippet.length > 0 && (firstSnippetChar === ' ' || firstSnippetChar === '\\xA0');\n\n                        if (hasTrailingSpace) {\n                            currentTriggerSnippet = currentTriggerSnippet.trim();\n                        }\n\n                        var regex = allowSpaces ? /[^\\S ]/g : /[\\xA0\\s]/g;\n                        this.tribute.hasTrailingSpace = regex.test(currentTriggerSnippet);\n\n                        if (!leadingSpace && (menuAlreadyActive || !regex.test(currentTriggerSnippet))) {\n                            return {\n                                mentionPosition: mostRecentTriggerCharPos,\n                                mentionText: currentTriggerSnippet,\n                                mentionSelectedElement: selected,\n                                mentionSelectedPath: path,\n                                mentionSelectedOffset: offset,\n                                mentionTriggerChar: triggerChar\n                            };\n                        }\n                    }\n                }\n            }\n        }, {\n            key: \"lastIndexWithLeadingSpace\",\n            value: function lastIndexWithLeadingSpace(str, trigger) {\n                var reversedStr = str.split('').reverse().join('');\n                var index = -1;\n\n                for (var cidx = 0, len = str.length; cidx < len; cidx++) {\n                    var firstChar = cidx === str.length - 1;\n                    var leadingSpace = /\\s/.test(reversedStr[cidx + 1]);\n                    var match = true;\n\n                    for (var triggerIdx = trigger.length - 1; triggerIdx >= 0; triggerIdx--) {\n                        if (trigger[triggerIdx] !== reversedStr[cidx - triggerIdx]) {\n                            match = false;\n                            break;\n                        }\n                    }\n\n                    if (match && (firstChar || leadingSpace)) {\n                        index = str.length - 1 - cidx;\n                        break;\n                    }\n                }\n\n                return index;\n            }\n        }, {\n            key: \"isContentEditable\",\n            value: function isContentEditable(element) {\n                return element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n            }\n        }, {\n            key: \"isMenuOffScreen\",\n            value: function isMenuOffScreen(coordinates, menuDimensions) {\n                var windowWidth = window.innerWidth;\n                var windowHeight = window.innerHeight;\n                var doc = document.documentElement;\n                var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n                var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n                var menuTop = typeof coordinates.top === 'number' ? coordinates.top : windowTop + windowHeight - coordinates.bottom - menuDimensions.height;\n                var menuRight = typeof coordinates.right === 'number' ? coordinates.right : coordinates.left + menuDimensions.width;\n                var menuBottom = typeof coordinates.bottom === 'number' ? coordinates.bottom : coordinates.top + menuDimensions.height;\n                var menuLeft = typeof coordinates.left === 'number' ? coordinates.left : windowLeft + windowWidth - coordinates.right - menuDimensions.width;\n                return {\n                    top: menuTop < Math.floor(windowTop),\n                    right: menuRight > Math.ceil(windowLeft + windowWidth),\n                    bottom: menuBottom > Math.ceil(windowTop + windowHeight),\n                    left: menuLeft < Math.floor(windowLeft)\n                };\n            }\n        }, {\n            key: \"getMenuDimensions\",\n            value: function getMenuDimensions() {\n                // Width of the menu depends of its contents and position\n                // We must check what its width would be without any obstruction\n                // This way, we can achieve good positioning for flipping the menu\n                var dimensions = {\n                    width: null,\n                    height: null\n                };\n                this.tribute.menu.style.cssText = \"top: 0px;\\n                                 left: 0px;\\n                                 position: fixed;\\n                                 display: block;\\n                                 visibility; hidden;\";\n                dimensions.width = this.tribute.menu.offsetWidth;\n                dimensions.height = this.tribute.menu.offsetHeight;\n                this.tribute.menu.style.cssText = \"display: none;\";\n                return dimensions;\n            }\n        }, {\n            key: \"getTextAreaOrInputUnderlinePosition\",\n            value: function getTextAreaOrInputUnderlinePosition(element, position, flipped) {\n                var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n                var isFirefox = window.mozInnerScreenX !== null;\n                var div = this.getDocument().createElement('div');\n                div.id = 'input-textarea-caret-position-mirror-div';\n                this.getDocument().body.appendChild(div);\n                var style = div.style;\n                var computed = window.getComputedStyle ? getComputedStyle(element) : element.currentStyle;\n                style.whiteSpace = 'pre-wrap';\n\n                if (element.nodeName !== 'INPUT') {\n                    style.wordWrap = 'break-word';\n                } // position off-screen\n\n\n                style.position = 'absolute';\n                style.visibility = 'hidden'; // transfer the element's properties to the div\n\n                properties.forEach(function (prop) {\n                    style[prop] = computed[prop];\n                });\n\n                if (isFirefox) {\n                    style.width = \"\".concat(parseInt(computed.width) - 2, \"px\");\n                    if (element.scrollHeight > parseInt(computed.height)) style.overflowY = 'scroll';\n                } else {\n                    style.overflow = 'hidden';\n                }\n\n                div.textContent = element.value.substring(0, position);\n\n                if (element.nodeName === 'INPUT') {\n                    div.textContent = div.textContent.replace(/\\s/g, ' ');\n                }\n\n                var span = this.getDocument().createElement('span');\n                span.textContent = element.value.substring(position) || '.';\n                div.appendChild(span);\n                var rect = element.getBoundingClientRect();\n                var doc = document.documentElement;\n                var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n                var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n                var top = 0;\n                var left = 0;\n\n                if (this.menuContainerIsBody) {\n                    top = rect.top;\n                    left = rect.left;\n                }\n\n                var coordinates = {\n                    top: top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth) + parseInt(computed.fontSize) - element.scrollTop,\n                    left: left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth)\n                };\n                var windowWidth = window.innerWidth;\n                var windowHeight = window.innerHeight;\n                var menuDimensions = this.getMenuDimensions();\n                var menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n                if (menuIsOffScreen.right) {\n                    coordinates.right = windowWidth - coordinates.left;\n                    coordinates.left = 'auto';\n                }\n\n                var parentHeight = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n                if (menuIsOffScreen.bottom) {\n                    var parentRect = this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect();\n                    var scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n                    coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top - span.offsetTop);\n                    coordinates.top = 'auto';\n                }\n\n                menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n                if (menuIsOffScreen.left) {\n                    coordinates.left = windowWidth > menuDimensions.width ? windowLeft + windowWidth - menuDimensions.width : windowLeft;\n                    delete coordinates.right;\n                }\n\n                if (menuIsOffScreen.top) {\n                    coordinates.top = windowHeight > menuDimensions.height ? windowTop + windowHeight - menuDimensions.height : windowTop;\n                    delete coordinates.bottom;\n                }\n\n                this.getDocument().body.removeChild(div);\n                return coordinates;\n            }\n        }, {\n            key: \"getContentEditableCaretPosition\",\n            value: function getContentEditableCaretPosition(selectedNodePosition) {\n                var range;\n                var sel = this.getWindowSelection();\n                range = this.getDocument().createRange();\n                range.setStart(sel.anchorNode, selectedNodePosition);\n                range.setEnd(sel.anchorNode, selectedNodePosition);\n                range.collapse(false);\n                var rect = range.getBoundingClientRect();\n                var doc = document.documentElement;\n                var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n                var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n                var left = rect.left;\n                var top = rect.top;\n                var coordinates = {\n                    left: left + windowLeft,\n                    top: top + rect.height + windowTop\n                };\n                var windowWidth = window.innerWidth;\n                var windowHeight = window.innerHeight;\n                var menuDimensions = this.getMenuDimensions();\n                var menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n                if (menuIsOffScreen.right) {\n                    coordinates.left = 'auto';\n                    coordinates.right = windowWidth - rect.left - windowLeft;\n                }\n\n                var parentHeight = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n                if (menuIsOffScreen.bottom) {\n                    var parentRect = this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect();\n                    var scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n                    coordinates.top = 'auto';\n                    coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top);\n                }\n\n                menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n                if (menuIsOffScreen.left) {\n                    coordinates.left = windowWidth > menuDimensions.width ? windowLeft + windowWidth - menuDimensions.width : windowLeft;\n                    delete coordinates.right;\n                }\n\n                if (menuIsOffScreen.top) {\n                    coordinates.top = windowHeight > menuDimensions.height ? windowTop + windowHeight - menuDimensions.height : windowTop;\n                    delete coordinates.bottom;\n                }\n\n                if (!this.menuContainerIsBody) {\n                    coordinates.left = coordinates.left ? coordinates.left - this.tribute.menuContainer.offsetLeft : coordinates.left;\n                    coordinates.top = coordinates.top ? coordinates.top - this.tribute.menuContainer.offsetTop : coordinates.top;\n                }\n\n                return coordinates;\n            }\n        }, {\n            key: \"scrollIntoView\",\n            value: function scrollIntoView(elem) {\n                var reasonableBuffer = 20,\n                    clientRect;\n                var maxScrollDisplacement = 100;\n                var e = this.menu;\n                if (typeof e === 'undefined') return;\n\n                while (clientRect === undefined || clientRect.height === 0) {\n                    clientRect = e.getBoundingClientRect();\n\n                    if (clientRect.height === 0) {\n                        e = e.childNodes[0];\n\n                        if (e === undefined || !e.getBoundingClientRect) {\n                            return;\n                        }\n                    }\n                }\n\n                var elemTop = clientRect.top;\n                var elemBottom = elemTop + clientRect.height;\n\n                if (elemTop < 0) {\n                    window.scrollTo(0, window.pageYOffset + clientRect.top - reasonableBuffer);\n                } else if (elemBottom > window.innerHeight) {\n                    var maxY = window.pageYOffset + clientRect.top - reasonableBuffer;\n\n                    if (maxY - window.pageYOffset > maxScrollDisplacement) {\n                        maxY = window.pageYOffset + maxScrollDisplacement;\n                    }\n\n                    var targetY = window.pageYOffset - (window.innerHeight - elemBottom);\n\n                    if (targetY > maxY) {\n                        targetY = maxY;\n                    }\n\n                    window.scrollTo(0, targetY);\n                }\n            }\n        }, {\n            key: \"menuContainerIsBody\",\n            get: function get() {\n                return this.tribute.menuContainer === document.body || !this.tribute.menuContainer;\n            }\n        }]);\n\n        return TributeRange;\n    }();\n\n    // Thanks to https://github.com/mattyork/fuzzy\n    var TributeSearch = /*#__PURE__*/function () {\n        function TributeSearch(tribute) {\n            _classCallCheck(this, TributeSearch);\n\n            this.tribute = tribute;\n            this.tribute.search = this;\n        }\n\n        _createClass(TributeSearch, [{\n            key: \"simpleFilter\",\n            value: function simpleFilter(pattern, array) {\n                var _this = this;\n\n                return array.filter(function (string) {\n                    return _this.test(pattern, string);\n                });\n            }\n        }, {\n            key: \"test\",\n            value: function test(pattern, string) {\n                return this.match(pattern, string) !== null;\n            }\n        }, {\n            key: \"match\",\n            value: function match(pattern, string, opts) {\n                opts = opts || {};\n                var len = string.length,\n                    pre = opts.pre || '',\n                    post = opts.post || '',\n                    compareString = opts.caseSensitive && string || string.toLowerCase();\n\n                if (opts.skip) {\n                    return {\n                        rendered: string,\n                        score: 0\n                    };\n                }\n\n                pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n                var patternCache = this.traverse(compareString, pattern, 0, 0, []);\n\n                if (!patternCache) {\n                    return null;\n                }\n\n                return {\n                    rendered: this.render(string, patternCache.cache, pre, post),\n                    score: patternCache.score\n                };\n            }\n        }, {\n            key: \"traverse\",\n            value: function traverse(string, pattern, stringIndex, patternIndex, patternCache) {\n                if (this.tribute.autocompleteSeparator) {\n                    // if the pattern search at end\n                    pattern = pattern.split(this.tribute.autocompleteSeparator).splice(-1)[0];\n                }\n\n                if (pattern.length === patternIndex) {\n                    // calculate score and copy the cache containing the indices where it's found\n                    return {\n                        score: this.calculateScore(patternCache),\n                        cache: patternCache.slice()\n                    };\n                } // if string at end or remaining pattern > remaining string\n\n\n                if (string.length === stringIndex || pattern.length - patternIndex > string.length - stringIndex) {\n                    return undefined;\n                }\n\n                var c = pattern[patternIndex];\n                var index = string.indexOf(c, stringIndex);\n                var best, temp;\n\n                while (index > -1) {\n                    patternCache.push(index);\n                    temp = this.traverse(string, pattern, index + 1, patternIndex + 1, patternCache);\n                    patternCache.pop(); // if downstream traversal failed, return best answer so far\n\n                    if (!temp) {\n                        return best;\n                    }\n\n                    if (!best || best.score < temp.score) {\n                        best = temp;\n                    }\n\n                    index = string.indexOf(c, index + 1);\n                }\n\n                return best;\n            }\n        }, {\n            key: \"calculateScore\",\n            value: function calculateScore(patternCache) {\n                var score = 0;\n                var temp = 1;\n                patternCache.forEach(function (index, i) {\n                    if (i > 0) {\n                        if (patternCache[i - 1] + 1 === index) {\n                            temp += temp + 1;\n                        } else {\n                            temp = 1;\n                        }\n                    }\n\n                    score += temp;\n                });\n                return score;\n            }\n        }, {\n            key: \"render\",\n            value: function render(string, indices, pre, post) {\n                var rendered = string.substring(0, indices[0]);\n                indices.forEach(function (index, i) {\n                    rendered += pre + string[index] + post + string.substring(index + 1, indices[i + 1] ? indices[i + 1] : string.length);\n                });\n                return rendered;\n            }\n        }, {\n            key: \"filter\",\n            value: function filter(pattern, arr, opts) {\n                var _this2 = this;\n\n                opts = opts || {};\n                return arr.reduce(function (prev, element, idx, arr) {\n                    var str = element;\n\n                    if (opts.extract) {\n                        str = opts.extract(element);\n\n                        if (!str) {\n                            // take care of undefineds / nulls / etc.\n                            str = '';\n                        }\n                    }\n\n                    var rendered = _this2.match(pattern, str, opts);\n\n                    if (rendered != null) {\n                        prev[prev.length] = {\n                            string: rendered.rendered,\n                            score: rendered.score,\n                            index: idx,\n                            original: element\n                        };\n                    }\n\n                    return prev;\n                }, []).sort(function (a, b) {\n                    var compare = b.score - a.score;\n                    if (compare) return compare;\n                    return a.index - b.index;\n                });\n            }\n        }]);\n\n        return TributeSearch;\n    }();\n\n    var Tribute = /*#__PURE__*/function () {\n        function Tribute(_ref) {\n            var _this = this;\n\n            var _ref$values = _ref.values,\n                values = _ref$values === void 0 ? null : _ref$values,\n                _ref$loadingItemTempl = _ref.loadingItemTemplate,\n                loadingItemTemplate = _ref$loadingItemTempl === void 0 ? null : _ref$loadingItemTempl,\n                _ref$iframe = _ref.iframe,\n                iframe = _ref$iframe === void 0 ? null : _ref$iframe,\n                _ref$selectClass = _ref.selectClass,\n                selectClass = _ref$selectClass === void 0 ? \"highlight\" : _ref$selectClass,\n                _ref$containerClass = _ref.containerClass,\n                containerClass = _ref$containerClass === void 0 ? \"local_modcomments-tribute-container\" : _ref$containerClass,\n                _ref$itemClass = _ref.itemClass,\n                itemClass = _ref$itemClass === void 0 ? \"\" : _ref$itemClass,\n                _ref$trigger = _ref.trigger,\n                trigger = _ref$trigger === void 0 ? \"@\" : _ref$trigger,\n                _ref$autocompleteMode = _ref.autocompleteMode,\n                autocompleteMode = _ref$autocompleteMode === void 0 ? false : _ref$autocompleteMode,\n                _ref$autocompleteSepa = _ref.autocompleteSeparator,\n                autocompleteSeparator = _ref$autocompleteSepa === void 0 ? null : _ref$autocompleteSepa,\n                _ref$selectTemplate = _ref.selectTemplate,\n                selectTemplate = _ref$selectTemplate === void 0 ? null : _ref$selectTemplate,\n                _ref$menuItemTemplate = _ref.menuItemTemplate,\n                menuItemTemplate = _ref$menuItemTemplate === void 0 ? null : _ref$menuItemTemplate,\n                _ref$lookup = _ref.lookup,\n                lookup = _ref$lookup === void 0 ? \"key\" : _ref$lookup,\n                _ref$fillAttr = _ref.fillAttr,\n                fillAttr = _ref$fillAttr === void 0 ? \"value\" : _ref$fillAttr,\n                _ref$collection = _ref.collection,\n                collection = _ref$collection === void 0 ? null : _ref$collection,\n                _ref$menuContainer = _ref.menuContainer,\n                menuContainer = _ref$menuContainer === void 0 ? null : _ref$menuContainer,\n                _ref$noMatchTemplate = _ref.noMatchTemplate,\n                noMatchTemplate = _ref$noMatchTemplate === void 0 ? null : _ref$noMatchTemplate,\n                _ref$requireLeadingSp = _ref.requireLeadingSpace,\n                requireLeadingSpace = _ref$requireLeadingSp === void 0 ? true : _ref$requireLeadingSp,\n                _ref$allowSpaces = _ref.allowSpaces,\n                allowSpaces = _ref$allowSpaces === void 0 ? false : _ref$allowSpaces,\n                _ref$replaceTextSuffi = _ref.replaceTextSuffix,\n                replaceTextSuffix = _ref$replaceTextSuffi === void 0 ? null : _ref$replaceTextSuffi,\n                _ref$positionMenu = _ref.positionMenu,\n                positionMenu = _ref$positionMenu === void 0 ? true : _ref$positionMenu,\n                _ref$spaceSelectsMatc = _ref.spaceSelectsMatch,\n                spaceSelectsMatch = _ref$spaceSelectsMatc === void 0 ? false : _ref$spaceSelectsMatc,\n                _ref$searchOpts = _ref.searchOpts,\n                searchOpts = _ref$searchOpts === void 0 ? {} : _ref$searchOpts,\n                _ref$menuItemLimit = _ref.menuItemLimit,\n                menuItemLimit = _ref$menuItemLimit === void 0 ? null : _ref$menuItemLimit,\n                _ref$menuShowMinLengt = _ref.menuShowMinLength,\n                menuShowMinLength = _ref$menuShowMinLengt === void 0 ? 0 : _ref$menuShowMinLengt;\n\n            _classCallCheck(this, Tribute);\n\n            this.autocompleteMode = autocompleteMode;\n            this.autocompleteSeparator = autocompleteSeparator;\n            this.menuSelected = 0;\n            this.current = {};\n            this.inputEvent = false;\n            this.isActive = false;\n            this.menuContainer = menuContainer;\n            this.allowSpaces = allowSpaces;\n            this.replaceTextSuffix = replaceTextSuffix;\n            this.positionMenu = positionMenu;\n            this.hasTrailingSpace = false;\n            this.spaceSelectsMatch = spaceSelectsMatch;\n\n            if (this.autocompleteMode) {\n                trigger = \"\";\n                allowSpaces = false;\n            }\n\n            if (values) {\n                this.collection = [{\n                    // symbol that starts the lookup\n                    trigger: trigger,\n                    // is it wrapped in an iframe\n                    iframe: iframe,\n                    // class applied to selected item\n                    selectClass: selectClass,\n                    // class applied to the Container\n                    containerClass: containerClass,\n                    // class applied to each item\n                    itemClass: itemClass,\n                    // function called on select that retuns the content to insert\n                    selectTemplate: (selectTemplate || Tribute.defaultSelectTemplate).bind(this),\n                    // function called that returns content for an item\n                    menuItemTemplate: (menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(this),\n                    // function called when menu is empty, disables hiding of menu.\n                    noMatchTemplate: function (t) {\n                        if (typeof t === \"string\") {\n                            if (t.trim() === \"\") return null;\n                            return t;\n                        }\n\n                        if (typeof t === \"function\") {\n                            return t.bind(_this);\n                        }\n\n                        return noMatchTemplate || function () {\n                            return \"<li>No Match Found!</li>\";\n                        }.bind(_this);\n                    }(noMatchTemplate),\n                    // column to search against in the object\n                    lookup: lookup,\n                    // column that contains the content to insert by default\n                    fillAttr: fillAttr,\n                    // array of objects or a function returning an array of objects\n                    values: values,\n                    // useful for when values is an async function\n                    loadingItemTemplate: loadingItemTemplate,\n                    requireLeadingSpace: requireLeadingSpace,\n                    searchOpts: searchOpts,\n                    menuItemLimit: menuItemLimit,\n                    menuShowMinLength: menuShowMinLength\n                }];\n            } else if (collection) {\n                if (this.autocompleteMode) console.warn(\"Tribute in autocomplete mode does not work for collections\");\n                this.collection = collection.map(function (item) {\n                    return {\n                        trigger: item.trigger || trigger,\n                        iframe: item.iframe || iframe,\n                        selectClass: item.selectClass || selectClass,\n                        containerClass: item.containerClass || containerClass,\n                        itemClass: item.itemClass || itemClass,\n                        selectTemplate: (item.selectTemplate || Tribute.defaultSelectTemplate).bind(_this),\n                        menuItemTemplate: (item.menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(_this),\n                        // function called when menu is empty, disables hiding of menu.\n                        noMatchTemplate: function (t) {\n                            if (typeof t === \"string\") {\n                                if (t.trim() === \"\") return null;\n                                return t;\n                            }\n\n                            if (typeof t === \"function\") {\n                                return t.bind(_this);\n                            }\n\n                            return noMatchTemplate || function () {\n                                return \"<li>No Match Found!</li>\";\n                            }.bind(_this);\n                        }(noMatchTemplate),\n                        lookup: item.lookup || lookup,\n                        fillAttr: item.fillAttr || fillAttr,\n                        values: item.values,\n                        loadingItemTemplate: item.loadingItemTemplate,\n                        requireLeadingSpace: item.requireLeadingSpace,\n                        searchOpts: item.searchOpts || searchOpts,\n                        menuItemLimit: item.menuItemLimit || menuItemLimit,\n                        menuShowMinLength: item.menuShowMinLength || menuShowMinLength\n                    };\n                });\n            } else {\n                throw new Error(\"[Tribute] No collection specified.\");\n            }\n\n            new TributeRange(this);\n            new TributeEvents(this);\n            new TributeMenuEvents(this);\n            new TributeSearch(this);\n        }\n\n        _createClass(Tribute, [{\n            key: \"triggers\",\n            value: function triggers() {\n                return this.collection.map(function (config) {\n                    return config.trigger;\n                });\n            }\n        }, {\n            key: \"attach\",\n            value: function attach(el) {\n                if (!el) {\n                    throw new Error(\"[Tribute] Must pass in a DOM node or NodeList.\");\n                } // Check if it is a jQuery collection\n\n\n                if (typeof jQuery !== \"undefined\" && el instanceof jQuery) {\n                    el = el.get();\n                } // Is el an Array/Array-like object?\n\n\n                if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\n                    var length = el.length;\n\n                    for (var i = 0; i < length; ++i) {\n                        this._attach(el[i]);\n                    }\n                } else {\n                    this._attach(el);\n                }\n            }\n        }, {\n            key: \"_attach\",\n            value: function _attach(el) {\n                if (el.hasAttribute(\"data-tribute\")) {\n                    console.warn(\"Tribute was already bound to \" + el.nodeName);\n                }\n\n                this.ensureEditable(el);\n                this.events.bind(el);\n                el.setAttribute(\"data-tribute\", true);\n            }\n        }, {\n            key: \"ensureEditable\",\n            value: function ensureEditable(element) {\n                if (Tribute.inputTypes().indexOf(element.nodeName) === -1) {\n                    if (element.contentEditable) {\n                        element.contentEditable = true;\n                    } else {\n                        throw new Error(\"[Tribute] Cannot bind to \" + element.nodeName);\n                    }\n                }\n            }\n        }, {\n            key: \"createMenu\",\n            value: function createMenu(containerClass) {\n                var wrapper = this.range.getDocument().createElement(\"div\"),\n                    ul = this.range.getDocument().createElement(\"ul\");\n                wrapper.className = containerClass;\n                wrapper.appendChild(ul);\n\n                if (this.menuContainer) {\n                    return this.menuContainer.appendChild(wrapper);\n                }\n\n                return this.range.getDocument().body.appendChild(wrapper);\n            }\n        }, {\n            key: \"showMenuFor\",\n            value: function showMenuFor(element, scrollTo) {\n                var _this2 = this;\n\n                // Only proceed if menu isn't already shown for the current element & mentionText\n                if (this.isActive && this.current.element === element && this.current.mentionText === this.currentMentionTextSnapshot) {\n                    return;\n                }\n\n                this.currentMentionTextSnapshot = this.current.mentionText; // create the menu if it doesn't exist.\n\n                if (!this.menu) {\n                    this.menu = this.createMenu(this.current.collection.containerClass);\n                    element.tributeMenu = this.menu;\n                    this.menuEvents.bind(this.menu);\n                }\n\n                this.isActive = true;\n                this.menuSelected = 0;\n\n                if (!this.current.mentionText) {\n                    this.current.mentionText = \"\";\n                }\n\n                var processValues = function processValues(values) {\n                    // Tribute may not be active any more by the time the value callback returns\n                    if (!_this2.isActive) {\n                        return;\n                    }\n\n                    var items = _this2.search.filter(_this2.current.mentionText, values, {\n                        pre: _this2.current.collection.searchOpts.pre || \"<span>\",\n                        post: _this2.current.collection.searchOpts.post || \"</span>\",\n                        skip: _this2.current.collection.searchOpts.skip,\n                        extract: function extract(el) {\n                            if (typeof _this2.current.collection.lookup === \"string\") {\n                                return el[_this2.current.collection.lookup];\n                            } else if (typeof _this2.current.collection.lookup === \"function\") {\n                                return _this2.current.collection.lookup(el, _this2.current.mentionText);\n                            } else {\n                                throw new Error(\"Invalid lookup attribute, lookup must be string or function.\");\n                            }\n                        }\n                    });\n\n                    if (_this2.current.collection.menuItemLimit) {\n                        items = items.slice(0, _this2.current.collection.menuItemLimit);\n                    }\n\n                    _this2.current.filteredItems = items;\n\n                    var ul = _this2.menu.querySelector(\"ul\");\n\n                    _this2.range.positionMenuAtCaret(scrollTo);\n\n                    if (!items.length) {\n                        var noMatchEvent = new CustomEvent(\"tribute-no-match\", {\n                            detail: _this2.menu\n                        });\n\n                        _this2.current.element.dispatchEvent(noMatchEvent);\n\n                        if (typeof _this2.current.collection.noMatchTemplate === \"function\" && !_this2.current.collection.noMatchTemplate() || !_this2.current.collection.noMatchTemplate) {\n                            _this2.hideMenu();\n                        } else {\n                            typeof _this2.current.collection.noMatchTemplate === \"function\" ? ul.innerHTML = _this2.current.collection.noMatchTemplate() : ul.innerHTML = _this2.current.collection.noMatchTemplate;\n                        }\n\n                        return;\n                    }\n\n                    ul.innerHTML = \"\";\n\n                    var fragment = _this2.range.getDocument().createDocumentFragment();\n\n                    items.forEach(function (item, index) {\n                        var li = _this2.range.getDocument().createElement(\"li\");\n\n                        li.setAttribute(\"data-index\", index);\n                        li.className = _this2.current.collection.itemClass;\n                        li.addEventListener(\"mousemove\", function (e) {\n                            var _this2$_findLiTarget = _this2._findLiTarget(e.target),\n                                _this2$_findLiTarget2 = _slicedToArray(_this2$_findLiTarget, 2),\n                                li = _this2$_findLiTarget2[0],\n                                index = _this2$_findLiTarget2[1];\n\n                            if (e.movementY !== 0) {\n                                _this2.events.setActiveLi(index);\n                            }\n                        });\n\n                        if (_this2.menuSelected === index) {\n                            li.classList.add(_this2.current.collection.selectClass);\n                        }\n\n                        li.innerHTML = _this2.current.collection.menuItemTemplate(item);\n                        fragment.appendChild(li);\n                    });\n                    ul.appendChild(fragment);\n                };\n\n                if (typeof this.current.collection.values === \"function\") {\n                    if (this.current.collection.loadingItemTemplate) {\n                        this.menu.querySelector(\"ul\").innerHTML = this.current.collection.loadingItemTemplate;\n                        this.range.positionMenuAtCaret(scrollTo);\n                    }\n\n                    this.current.collection.values(this.current.mentionText, processValues);\n                } else {\n                    processValues(this.current.collection.values);\n                }\n            }\n        }, {\n            key: \"_findLiTarget\",\n            value: function _findLiTarget(el) {\n                if (!el) return [];\n                var index = el.getAttribute(\"data-index\");\n                return !index ? this._findLiTarget(el.parentNode) : [el, index];\n            }\n        }, {\n            key: \"showMenuForCollection\",\n            value: function showMenuForCollection(element, collectionIndex) {\n                if (element !== document.activeElement) {\n                    this.placeCaretAtEnd(element);\n                }\n\n                this.current.collection = this.collection[collectionIndex || 0];\n                this.current.externalTrigger = true;\n                this.current.element = element;\n                if (element.isContentEditable) this.insertTextAtCursor(this.current.collection.trigger);else this.insertAtCaret(element, this.current.collection.trigger);\n                this.showMenuFor(element);\n            } // TODO: make sure this works for inputs/textareas\n\n        }, {\n            key: \"placeCaretAtEnd\",\n            value: function placeCaretAtEnd(el) {\n                el.focus();\n\n                if (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n                    var range = document.createRange();\n                    range.selectNodeContents(el);\n                    range.collapse(false);\n                    var sel = window.getSelection();\n                    sel.removeAllRanges();\n                    sel.addRange(range);\n                } else if (typeof document.body.createTextRange != \"undefined\") {\n                    var textRange = document.body.createTextRange();\n                    textRange.moveToElementText(el);\n                    textRange.collapse(false);\n                    textRange.select();\n                }\n            } // for contenteditable\n\n        }, {\n            key: \"insertTextAtCursor\",\n            value: function insertTextAtCursor(text) {\n                var sel, range;\n                sel = window.getSelection();\n                range = sel.getRangeAt(0);\n                range.deleteContents();\n                var textNode = document.createTextNode(text);\n                range.insertNode(textNode);\n                range.selectNodeContents(textNode);\n                range.collapse(false);\n                sel.removeAllRanges();\n                sel.addRange(range);\n            } // for regular inputs\n\n        }, {\n            key: \"insertAtCaret\",\n            value: function insertAtCaret(textarea, text) {\n                var scrollPos = textarea.scrollTop;\n                var caretPos = textarea.selectionStart;\n                var front = textarea.value.substring(0, caretPos);\n                var back = textarea.value.substring(textarea.selectionEnd, textarea.value.length);\n                textarea.value = front + text + back;\n                caretPos = caretPos + text.length;\n                textarea.selectionStart = caretPos;\n                textarea.selectionEnd = caretPos;\n                textarea.focus();\n                textarea.scrollTop = scrollPos;\n            }\n        }, {\n            key: \"hideMenu\",\n            value: function hideMenu() {\n                if (this.menu) {\n                    this.menu.style.cssText = \"display: none;\";\n                    this.isActive = false;\n                    this.menuSelected = 0;\n                    this.current = {};\n                }\n            }\n        }, {\n            key: \"selectItemAtIndex\",\n            value: function selectItemAtIndex(index, originalEvent) {\n                index = parseInt(index);\n                if (typeof index !== \"number\" || isNaN(index)) return;\n                var item = this.current.filteredItems[index];\n                var content = this.current.collection.selectTemplate(item);\n                if (content !== null) this.replaceText(content, originalEvent, item);\n            }\n        }, {\n            key: \"replaceText\",\n            value: function replaceText(content, originalEvent, item) {\n                this.range.replaceTriggerText(content, true, true, originalEvent, item);\n            }\n        }, {\n            key: \"_append\",\n            value: function _append(collection, newValues, replace) {\n                if (typeof collection.values === \"function\") {\n                    throw new Error(\"Unable to append to values, as it is a function.\");\n                } else if (!replace) {\n                    collection.values = collection.values.concat(newValues);\n                } else {\n                    collection.values = newValues;\n                }\n            }\n        }, {\n            key: \"append\",\n            value: function append(collectionIndex, newValues, replace) {\n                var index = parseInt(collectionIndex);\n                if (typeof index !== \"number\") throw new Error(\"please provide an index for the collection to update.\");\n                var collection = this.collection[index];\n\n                this._append(collection, newValues, replace);\n            }\n        }, {\n            key: \"appendCurrent\",\n            value: function appendCurrent(newValues, replace) {\n                if (this.isActive) {\n                    this._append(this.current.collection, newValues, replace);\n                } else {\n                    throw new Error(\"No active state. Please use append instead and pass an index.\");\n                }\n            }\n        }, {\n            key: \"detach\",\n            value: function detach(el) {\n                if (!el) {\n                    throw new Error(\"[Tribute] Must pass in a DOM node or NodeList.\");\n                } // Check if it is a jQuery collection\n\n\n                if (typeof jQuery !== \"undefined\" && el instanceof jQuery) {\n                    el = el.get();\n                } // Is el an Array/Array-like object?\n\n\n                if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\n                    var length = el.length;\n\n                    for (var i = 0; i < length; ++i) {\n                        this._detach(el[i]);\n                    }\n                } else {\n                    this._detach(el);\n                }\n            }\n        }, {\n            key: \"_detach\",\n            value: function _detach(el) {\n                var _this3 = this;\n\n                this.events.unbind(el);\n\n                if (el.tributeMenu) {\n                    this.menuEvents.unbind(el.tributeMenu);\n                }\n\n                setTimeout(function () {\n                    el.removeAttribute(\"data-tribute\");\n                    _this3.isActive = false;\n\n                    if (el.tributeMenu) {\n                        el.tributeMenu.remove();\n                    }\n                });\n            }\n        }, {\n            key: \"isActive\",\n            get: function get() {\n                return this._isActive;\n            },\n            set: function set(val) {\n                if (this._isActive != val) {\n                    this._isActive = val;\n\n                    if (this.current.element) {\n                        var noMatchEvent = new CustomEvent(\"tribute-active-\".concat(val));\n                        this.current.element.dispatchEvent(noMatchEvent);\n                    }\n                }\n            }\n        }], [{\n            key: \"defaultSelectTemplate\",\n            value: function defaultSelectTemplate(item) {\n                if (typeof item === \"undefined\") return \"\".concat(this.current.collection.trigger).concat(this.current.mentionText);\n\n                if (this.range.isContentEditable(this.current.element)) {\n                    return '<span class=\"tribute-mention\">' + (this.current.collection.trigger + item.original[this.current.collection.fillAttr]) + \"</span>\";\n                }\n\n                return this.current.collection.trigger + item.original[this.current.collection.fillAttr];\n            }\n        }, {\n            key: \"defaultMenuItemTemplate\",\n            value: function defaultMenuItemTemplate(matchItem) {\n                return matchItem.string;\n            }\n        }, {\n            key: \"inputTypes\",\n            value: function inputTypes() {\n                return [\"TEXTAREA\", \"INPUT\"];\n            }\n        }]);\n\n        return Tribute;\n    }();\n\n    /**\n     * Tribute.js\n     * Native ES6 JavaScript @mention Plugin\n     **/\n\n    return Tribute;\n})));"],"names":["global","factory","this","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_slicedToArray","arr","Array","isArray","_arrayWithHoles","Symbol","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","_nonIterableRest","len","arr2","find","predicate","list","thisArg","arguments","window","CustomEvent","CustomEvent$1","event","params","bubbles","cancelable","detail","evt","document","createEvent","initCustomEvent","Event","TributeEvents","tribute","events","element","boundKeydown","keydown","bind","boundKeyup","keyup","boundInput","input","addEventListener","removeEventListener","shouldDeactivate","isActive","hideMenu","commandEvent","keys","forEach","keyCode","callbacks","toLowerCase","inputEvent","menu","contains","li","preventDefault","stopPropagation","nodeName","parentNode","Error","selectItemAtIndex","getAttribute","current","externalTrigger","setTimeout","updateSelection","allowSpaces","hasTrailingSpace","autocompleteMode","triggerChar","getKeyCode","isNaN","trigger","triggers","charCodeAt","mentionText","collection","menuShowMinLength","showMenuFor","eventKeyPressed","el","info","range","getTriggerInfo","mentionTriggerChar","selectedPath","mentionSelectedPath","selectedOffset","mentionSelectedOffset","_this","e","collectionItem","item","enter","filteredItems","menuSelected","escape","tab","space","spaceSelectsMatch","up","count","selected","setActiveLi","scrollTop","scrollHeight","down","index","lis","querySelectorAll","parseInt","classList","add","selectClass","liClientRect","getBoundingClientRect","menuClientRect","bottom","scrollDistance","top","_scrollDistance","remove","elem","includeMargin","height","style","currentStyle","getComputedStyle","parseFloat","marginTop","marginBottom","TributeMenuEvents","menuEvents","menuClickEvent","click","menuContainerScrollEvent","debounce","windowResizeEvent","positionMenuAtCaret","getDocument","menuContainer","func","wait","immediate","timeout","_arguments","_this2","context","args","callNow","clearTimeout","apply","TributeRange","iframe","contentWindow","scrollTo","coordinates","positionMenu","cssText","isContentEditable","getContentEditableCaretPosition","mentionPosition","getTextAreaOrInputUnderlinePosition","concat","left","right","scrollIntoView","menuDimensions","width","offsetWidth","offsetHeight","menuIsOffScreen","isMenuOffScreen","menuIsOffScreenHorizontally","innerWidth","menuIsOffScreenVertically","innerHeight","targetElement","path","offset","childNodes","nextSibling","previousSibling","sel","getWindowSelection","createRange","setStart","setEnd","collapse","removeAllRanges","error","addRange","focus","text","requireLeadingSpace","originalEvent","replaceEvent","replaceTextSuffix","_endPos","pasteHtml","myField","textSuffix","startPos","endPos","substring","selectionStart","selectionEnd","dispatchEvent","html","anchorNode","deleteContents","createElement","innerHTML","node","lastNode","frag","createDocumentFragment","firstChild","appendChild","insertNode","cloneRange","setStartAfter","getSelection","ctx","ce","contentEditable","getNodePositionInParent","reverse","getRangeAt","startOffset","selectedElem","workingNodeContent","textContent","selectStartOffset","textComponent","wordsArray","replace","autocompleteSeparator","split","trim","menuAlreadyActive","isAutocomplete","selectionInfo","getContentEditableSelectedPath","effectiveRange","getTextPrecedingCurrentSelection","lastWordOfEffectiveRange","getLastWordInText","mentionSelectedElement","mostRecentTriggerCharPos","config","c","idx","lastIndexWithLeadingSpace","lastIndexOf","currentTriggerSnippet","firstSnippetChar","leadingSpace","regex","str","reversedStr","join","cidx","firstChar","match","triggerIdx","windowWidth","windowHeight","doc","documentElement","windowLeft","pageXOffset","scrollLeft","clientLeft","windowTop","pageYOffset","clientTop","menuTop","menuRight","menuBottom","menuLeft","Math","floor","ceil","dimensions","position","flipped","isFirefox","mozInnerScreenX","div","id","body","computed","whiteSpace","wordWrap","visibility","prop","overflowY","overflow","span","rect","menuContainerIsBody","offsetTop","borderTopWidth","fontSize","offsetLeft","borderLeftWidth","getMenuDimensions","parentHeight","scrollStillAvailable","removeChild","selectedNodePosition","clientRect","elemTop","elemBottom","maxY","targetY","get","TributeSearch","search","pattern","array","filter","string","opts","pre","post","compareString","caseSensitive","skip","rendered","score","patternCache","traverse","render","cache","stringIndex","patternIndex","splice","calculateScore","best","temp","indexOf","pop","indices","reduce","prev","extract","original","sort","a","b","compare","Tribute","_ref","t","_ref$values","values","_ref$loadingItemTempl","loadingItemTemplate","_ref$iframe","_ref$selectClass","_ref$containerClass","containerClass","_ref$itemClass","itemClass","_ref$trigger","_ref$autocompleteMode","_ref$autocompleteSepa","_ref$selectTemplate","selectTemplate","_ref$menuItemTemplate","menuItemTemplate","_ref$lookup","lookup","_ref$fillAttr","fillAttr","_ref$collection","_ref$menuContainer","_ref$noMatchTemplate","noMatchTemplate","_ref$requireLeadingSp","_ref$allowSpaces","_ref$replaceTextSuffi","_ref$positionMenu","_ref$spaceSelectsMatc","_ref$searchOpts","searchOpts","_ref$menuItemLimit","menuItemLimit","_ref$menuShowMinLengt","defaultSelectTemplate","defaultMenuItemTemplate","console","warn","map","jQuery","NodeList","HTMLCollection","_attach","hasAttribute","ensureEditable","setAttribute","inputTypes","wrapper","ul","className","currentMentionTextSnapshot","createMenu","tributeMenu","processValues","items","querySelector","noMatchEvent","fragment","_this2$_findLiTarget2","_findLiTarget","movementY","collectionIndex","activeElement","placeCaretAtEnd","insertTextAtCursor","insertAtCaret","selectNodeContents","createTextRange","textRange","moveToElementText","select","textNode","createTextNode","textarea","scrollPos","caretPos","front","back","content","replaceText","replaceTriggerText","newValues","_append","_detach","_this3","unbind","removeAttribute","_isActive","set","val","matchItem","exports","module","define","amd","self"],"mappings":"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"}